{% macro search_services() %}
<div class="contents-wrapper d-flex justify-content-center">
    <form class="pb-4" method="post">
        <div id="" class="input-group ">
            
            <div class="input-group-prepend ">
                
                <select id="service_type" class="form-control btn-outline-info" name="service_type" required="
                " type="text" value=""><option value="none" selected disabled hidden>Service Type</option>
                </select>
                
            </div>
            <select id="service_sname" class=" form-control btn-outline-info" name="service_sname" required="
            " type="text" value="" style="width: 200px; max-width: 200px;" ><option value="none" selected disabled hidden>Select Service</option></select>
            <div class="input-group-append">
            
            <button id="submit" class="btn btn-outline-success" name="submit" type="submit">
            <i class="fas fa-search"></i></button>
            </div>
        </div>
        
    </form>
</div>
{% endmacro %}

{% macro search_apiform(url1='/api/maps/pincodes', tag1='map_pincode', url2='/api/maps/', key_response='Post office',tag2='map_postoffice' ) %}
<script>
    $(document).ready(function(){
        var xhr2 = $.ajax({
                    url: '{{url1}}',
                    method: 'GET',
                    statusCode: {
                        200: function (response) {
                            
                            console.log(response)
                            data = JSON.parse(response)
                            for (var index = 0; index < data.length; index++) {
                                $('#{{tag1}}').append('<option value="' + data[index] + '">' + data[index] + '</option>');
                            }
                        }
                    }
                })
                
                $('select[name="{{tag1}}"]').change(function(){
                 // do whatever you want to do  
                 var fetched = $('#{{tag1}}').find(":selected").text();
                console.log(fetched);
                
           
            $.ajax({
                
                    url: '{{url2}}' + fetched,
                    method: 'GET',
                    statusCode: {
                        200: function (response) {
                            dat = response['{{key_response}}'];
                            data = Object.values(dat)
                            //console.log(data.keys());
                            $('#{{tag2}}').find('option').remove()
                            for (var index = 0; index < data.length; index++) {
                                console.log()
                                $('#{{tag2}}').append('<option value="' + data[index] + '">' + data[index] + '</option>');
                            }
                        }
                    }
                })
           
                  });
        

    });


    </script>
    {% endmacro %}


{% macro contact_us(form) %}
    
    <div class="row pt-2 " id="contact">
        <div class="mx-auto container registration  form-row ">
            <div class="p-5">
                <form method="post" class="">
                    <div class="row">
                        <div class="col-12">
                        <div class="form-group">
                            {{form.fullname(class="form-control mt-2")}}
                        </div>
                        </div>
                        
                        <div class="col-lg-6">
                        <div class="form-group">
                            {{form.email(class="form-control mt-2")}}
                        </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="form-group">
                                {{form.phone(class="form-control mt-2")}}
                            </div>
                            </div>
                        <div class="col-12">
                        <div class="form-group ">
                            {{form.message(class="form-control mt-2")}}
                        </div>
                        </div>
                        <div class="col-12 text-right">
                        {{form.submit(class="btn btn-info")}}
                        </div>
                    </div>
                </form>
            </div>  
        </div>
    </div>
{% endmacro %}


{% macro service_apiform(url1='/api/services/', tag1='service_type', url2='/api/services/id/', key_response='Service-sname',tag2='service_sname') %}
<script>
    $(document).ready(function(){
        var xhr2 = $.ajax({
                    url: '{{url1}}',
                    method: 'GET',
                    statusCode: {
                        200: function (response) {
                            
                            
                            data = Object.keys(JSON.parse(response))
                            data_vals = Object.values(JSON.parse(response))
                            //console.log(data)
                            for (var index = 0; index < data.length; index++) {
                                $('#{{tag1}}').append('<option value="' + data_vals[index] + '">' + data[index] + '</option>');
                            }
                        }
                    }
                })
                
                $('select[name="{{tag1}}"]').change(function(){
                 // do whatever you want to do  
                 //var fetched = $('#{{tag1}}').find(":selected").text();
                 var fetched = $('#{{tag1}}').find(":selected").val();
                //console.log(fetched);
                
           
            $.ajax({
                
                    url: '{{url2}}' + fetched,
                    method: 'GET',
                    statusCode: {
                        200: function (response) {
                            dat = response['{{key_response}}'];
                            gid = response['Service-gid']
                            data = Object.values(dat)
                            gid_val = Object.values(gid)
                            //console.log(data.keys());
                            $('#{{tag2}}').find('option').remove()
                            for (var index = 0; index < data.length; index++) {
                                //console.log()
                                $('#{{tag2}}').append('<option value="' + gid_val[index] + '">' + data[index] + '</option>');
                            }
                        }
                    }
                })
           
                  });
        

    });


    </script>
    {% endmacro %}